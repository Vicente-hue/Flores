<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para mi amor ❤️</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #ff99cc;
            --card-color: #f5e6d3;
            --text-color: #5a3e36;
            --heart-color-1: #ff4d4d;
            --heart-color-2: #ff8080;
            --heart-color-3: #e60000;
            --trunk-color: #8b4513;
        }

        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: radial-gradient(circle, var(--bg-color) 0%, #cc6699 100%);
            font-family: 'Dancing Script', cursive;
            overflow-x: hidden;
        }

        .card {
            width: 90%;
            max-width: 400px;
            /* Se cambió height por min-height para evitar que el texto choque */
            min-height: 650px; 
            background-color: var(--card-color);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 25px;
            box-sizing: border-box;
        }

        .text-section { 
            z-index: 10; 
            color: var(--text-color); 
            text-align: center;
        }

        .hidden-text {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .visible-text { opacity: 1; transform: translateY(0); }

        h2 { font-size: 1.8rem; margin-bottom: 10px; }
        p { font-size: 1.4rem; margin: 8px 0; }
        
        .counter-container {
            margin-top: 15px;
            font-size: 1.2rem;
            border-top: 1px dashed var(--text-color);
            padding-top: 10px;
        }

        #counter {
            font-weight: 700;
            font-size: 1.6rem;
            color: var(--heart-color-3);
            display: block;
            margin-top: 5px;
        }

        .final-message {
            margin-top: 20px;
            font-size: 1.6rem;
            font-weight: bold;
            color: var(--heart-color-3);
        }

        /* --- ÁREA DEL ÁRBOL AJUSTADA --- */
        .tree-area {
            position: relative;
            margin: 20px auto 0;
            width: 200px;
            height: 220px;
        }

        .ground-line {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--text-color);
            opacity: 0.5;
        }

        .trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 18px;
            height: 0;
            background-color: var(--trunk-color);
            transform: translateX(-50%);
            border-radius: 4px;
            transition: height 2s ease-in-out;
        }

        .trunk.grow { height: 100px; }

        .leaves-container {
            position: absolute;
            top: 0;
            left: 50%;
            width: 180px;
            height: 150px;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 1s ease-in;
        }
        .leaves-container.show { opacity: 1; }

        .leaf {
            position: absolute;
            width: 18px;
            height: 18px;
            background-color: var(--heart-color-1);
            clip-path: path('M9,3 C9,1.5 7.5,0 6,0 S3,1.5 3,3 C3,5 9,13 9,13 S15,5 15,3 C15,1.5 13.5,0 12,0 S9,1.5 9,3 Z');
            transform: scale(0);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Posiciones de los pétalos */
        .leaf:nth-child(1)  { top: 60px; left: 80px; --d: 0.1s; background: var(--heart-color-2);}
        .leaf:nth-child(2)  { top: 40px; left: 60px; --d: 0.2s; background: var(--heart-color-3);}
        .leaf:nth-child(3)  { top: 50px; left: 100px; --d: 0.3s; }
        .leaf:nth-child(4)  { top: 20px; left: 75px; --d: 0.4s; background: var(--heart-color-2);}
        .leaf:nth-child(5)  { top: 30px; left: 120px; --d: 0.5s; }
        .leaf:nth-child(6)  { top: 70px; left: 40px; --d: 0.6s; background: var(--heart-color-3);}
        .leaf:nth-child(7)  { top: 10px; left: 90px; --d: 0.7s; }
        .leaf:nth-child(8)  { top: 80px; left: 110px; --d: 0.8s; background: var(--heart-color-2);}
        .leaf:nth-child(9)  { top: 20px; left: 50px; --d: 0.9s; }
        .leaf:nth-child(10) { top: 90px; left: 70px; --d: 1.0s; background: var(--heart-color-3);}
        .leaf:nth-child(11) { top: 5px; left: 75px; --d: 1.1s; }
        .leaf:nth-child(12) { top: 95px; left: 130px; --d: 1.2s; background: var(--heart-color-2);}
        .leaf:nth-child(13) { top: 65px; left: 20px; --d: 1.3s; }
        .leaf:nth-child(14) { top: 15px; left: 130px; --d: 1.4s; background: var(--heart-color-3);}
        .leaf:nth-child(15) { top: 100px; left: 50px; --d: 1.5s; }

        .leaves-container.show .leaf {
            transform: scale(1) rotate(var(--r, 0deg));
            transition-delay: var(--d);
        }
    </style>
</head>
<body>

    <div class="card">
        <div class="text-section">
            <h2 id="title" class="hidden-text">Para el amor de mi vida:</h2>
            <p id="phrase1" class="hidden-text">Si pudiera elegir un lugar seguro, sería a tu lado.</p>
            <div id="counter-box" class="counter-container hidden-text">
                Mi amor por ti comenzó hace...
                <span id="counter">Calculando...</span>
            </div>
            <p id="phrase2" class="hidden-text" style="margin-top: 15px;">Cuanto más tiempo estoy contigo, más te amo.</p>
            <p id="final" class="hidden-text final-message">— I Love You! —</p>
        </div>

        <div class="tree-area">
            <div class="leaves-container" id="leaves">
                <div class="leaf" style="--r: -10deg;"></div><div class="leaf" style="--r: 15deg;"></div>
                <div class="leaf" style="--r: 5deg;"></div><div class="leaf" style="--r: -20deg;"></div>
                <div class="leaf" style="--r: 10deg;"></div><div class="leaf" style="--r: -5deg;"></div>
                <div class="leaf" style="--r: 25deg;"></div><div class="leaf" style="--r: -15deg;"></div>
                <div class="leaf" style="--r: 0deg;"></div><div class="leaf" style="--r: 18deg;"></div>
                <div class="leaf" style="--r: -8deg;"></div><div class="leaf" style="--r: 12deg;"></div>
                <div class="leaf" style="--r: -12deg;"></div><div class="leaf" style="--r: 20deg;"></div>
                <div class="leaf" style="--r: -22deg;"></div>
            </div>
            <div class="trunk" id="trunk"></div>
            <div class="ground-line"></div>
        </div>
    </div>

    <script>
        // FECHA ACTUALIZADA: 17 de mayo de 2023
        const fechaInicio = new Date("2023-09-23T00:00:00"); 

        function actualizarContador() {
            const ahora = new Date();
            const diferencia = ahora - fechaInicio;

            const segundosTotales = Math.floor(diferencia / 1000);
            const minutosTotales = Math.floor(segundosTotales / 60);
            const horasTotales = Math.floor(minutosTotales / 60);
            const dias = Math.floor(horasTotales / 24);

            const segundos = segundosTotales % 60;
            const minutos = minutosTotales % 60;
            const horas = horasTotales % 24;

            document.getElementById('counter').innerHTML = 
                `${dias} días ${horas.toString().padStart(2, '0')}h ${minutos.toString().padStart(2, '0')}m ${segundos.toString().padStart(2, '0')}s`;
        }

        function iniciarAnimacion() {
            const tiempos = [
                { id: 'title', delay: 500 },
                { id: 'phrase1', delay: 1500 },
                { id: 'counter-box', delay: 2500, callback: () => {
                    actualizarContador();
                    setInterval(actualizarContador, 1000);
                }},
                { id: 'phrase2', delay: 4000 },
                { id: 'final', delay: 5500 },
                { id: 'trunk', delay: 6500, class: 'grow' },
                { id: 'leaves', delay: 7500, class: 'show' }
            ];

            tiempos.forEach(item => {
                setTimeout(() => {
                    const el = document.getElementById(item.id);
                    if (item.class) el.classList.add(item.class);
                    else el.classList.add('visible-text');
                    if (item.callback) item.callback();
                }, item.delay);
            });
        }

        window.onload = iniciarAnimacion;
    </script>
</body>
</html>
